import{a as x,t as k,b as F}from"../chunks/disclose-version.CJFPsRL-.js";import{k as I,u as U,M as q,j as O,P as B,p as N,a as R,g as L,d as _,t as M,m as S,c as v,s as g,r as y,n as C}from"../chunks/runtime.CUNFE6o5.js";import{s as D}from"../chunks/render.YXdxLiCJ.js";import{p as z,i as J}from"../chunks/props.D6-fppJ3.js";import{i as G}from"../chunks/lifecycle.CDJD4jvc.js";import{p as K,i as Q,a as V}from"../chunks/entry.Dqyu0HAP.js";import{C as W}from"../chunks/Card.BhF9ZHtl.js";import{I as H,B as X}from"../chunks/Input.MTiOtp_t.js";function Y(e,n,c){I(()=>{var a=U(()=>n(e,c==null?void 0:c())||{});if(c&&(a!=null&&a.update)){var t=!1,o={};q(()=>{var s=c();O(s),t&&B(o,s)&&(o=s,a.update(s))}),t=!0}if(a!=null&&a.destroy)return()=>a.destroy()})}function Z(e){const n=JSON.parse(e);return n.data&&(n.data=K(n.data)),n}function $(e){return HTMLElement.prototype.cloneNode.call(e)}function tt(e,n=()=>{}){const c=async({action:t,result:o,reset:s=!0,invalidateAll:d=!0})=>{o.type==="success"&&(s&&HTMLFormElement.prototype.reset.call(e),d&&await Q()),(location.origin+location.pathname===t.origin+t.pathname||o.type==="redirect"||o.type==="error")&&V(o)};async function a(t){var r,l,u,w,P;if(((r=t.submitter)!=null&&r.hasAttribute("formmethod")?t.submitter.formMethod:$(e).method)!=="post")return;t.preventDefault();const s=new URL((l=t.submitter)!=null&&l.hasAttribute("formaction")?t.submitter.formAction:$(e).action),d=(u=t.submitter)!=null&&u.hasAttribute("formenctype")?t.submitter.formEnctype:$(e).enctype,p=new FormData(e),A=(w=t.submitter)==null?void 0:w.getAttribute("name");A&&p.append(A,((P=t.submitter)==null?void 0:P.getAttribute("value"))??"");const f=new AbortController;let b=!1;const h=await n({action:s,cancel:()=>b=!0,controller:f,formData:p,formElement:e,submitter:t.submitter})??c;if(b)return;let m;try{const i=new Headers({accept:"application/json","x-sveltekit-action":"true"});d!=="multipart/form-data"&&i.set("Content-Type",/^(:?application\/x-www-form-urlencoded|text\/plain)$/.test(d)?d:"application/x-www-form-urlencoded");const j=d==="multipart/form-data"?p:new URLSearchParams(p),T=await fetch(s,{method:"POST",headers:i,cache:"no-store",body:j,signal:f.signal});m=Z(await T.text()),m.type==="error"&&(m.status=T.status)}catch(i){if((i==null?void 0:i.name)==="AbortError")return;m={type:"error",error:i}}h({action:s,formData:p,formElement:e,update:i=>c({action:s,result:m,reset:i==null?void 0:i.reset,invalidateAll:i==null?void 0:i.invalidateAll}),result:m})}return HTMLFormElement.prototype.addEventListener.call(e,"submit",a),{destroy(){HTMLFormElement.prototype.removeEventListener.call(e,"submit",a)}}}var et=k('<div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative" role="alert"><span class="block sm:inline"> </span></div>'),at=k('<form method="POST" class="space-y-4"><div class="text-center"><div class="flex justify-center"><img src="/coachhub-logo-ImageLine.svg" alt="Coachub Logo" class="h-auto w-auto"></div> <p class="text-gray-600 mt-2">Enter your credentials to access your motorhome controls</p></div> <!> <!> <!> <!> <div class="text-center text-sm text-gray-600"><p class="font-medium mb-1">Demo credentials:</p> <p>Admin: admin / admin</p> <p>User: user / user</p></div></form>'),rt=k('<div class="min-h-screen flex items-center justify-center bg-gray-100"><div class="w-full max-w-md"><!></div></div>');function ut(e,n){N(n,!1);let c=z(n,"form",8),a=S(!1),t=S("");G();var o=rt(),s=v(o),d=v(s);W(d,{children:(p,A)=>{var f=at(),b=g(v(f),2);J(b,()=>{var r;return(r=c())==null?void 0:r.error},r=>{var l=et(),u=v(l),w=v(u);y(u),y(l),M(()=>D(w,c().error)),x(r,l)});var E=g(b,2);H(E,{label:"Email or Username",id:"identifier",type:"text",name:"identifier",get value(){return L(t)},set value(r){_(t,r)},required:!0,$$legacy:!0});var h=g(E,2);H(h,{label:"Password",id:"password",type:"password",name:"password",required:!0});var m=g(h,2);X(m,{type:"submit",get disabled(){return L(a)},class:"w-full",children:(r,l)=>{C();var u=F();M(()=>D(u,L(a)?"Signing in...":"Sign In")),x(r,u)},$$slots:{default:!0}}),C(2),y(f),Y(f,(r,l)=>tt(r,l),()=>()=>(_(a,!0),async({update:r})=>{await r(),_(a,!1)})),x(p,f)},$$slots:{default:!0}}),y(s),y(o),x(e,o),R()}export{ut as component};
