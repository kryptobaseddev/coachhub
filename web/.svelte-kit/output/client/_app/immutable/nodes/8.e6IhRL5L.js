import{a as u,t as h,b as te}from"../chunks/disclose-version.CJFPsRL-.js";import{p as me,m as w,l as pe,b as ue,f as R,a as fe,d as n,g as e,c as r,n as O,r as a,s,t as U,h as ae}from"../chunks/runtime.CUNFE6o5.js";import{e as _e,s as g}from"../chunks/render.YXdxLiCJ.js";import{p as xe,i as K}from"../chunks/props.D6-fppJ3.js";import{e as he}from"../chunks/Icon.Bvhz2f0e.js";import{r as ge,a as ye}from"../chunks/index.CnPSb7tb.js";import{t as Q,f as V}from"../chunks/index.D3NlNEen.js";import{i as $e,s as be}from"../chunks/select.C4s-v16H.js";import{p as we}from"../chunks/event-modifiers.CWmzcjye.js";import{i as Ue}from"../chunks/lifecycle.CDJD4jvc.js";import"../chunks/entry.Dqyu0HAP.js";import{I as j}from"../chunks/Icon.M0zAX6Zb.js";import{B as N,I as W}from"../chunks/Input.MTiOtp_t.js";import{C as re}from"../chunks/Card.BhF9ZHtl.js";var Ce=h("<!> Add User",1),Le=h('<div class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-6"> </div>'),Pe=h('<tr><td class="px-4 py-2 whitespace-nowrap"> </td><td class="px-4 py-2 whitespace-nowrap"> </td><td class="px-4 py-2 whitespace-nowrap capitalize"> </td><td class="px-4 py-2 whitespace-nowrap"> </td><td class="px-4 py-2 whitespace-nowrap text-right"><!> <!></td></tr>'),Se=h('<div class="flex justify-between items-center mb-6"><div class="flex items-center space-x-2"><!> <h1 class="text-2xl font-semibold">User Management</h1></div> <!></div> <div class="mb-6"><!></div> <!> <div class="overflow-x-auto"><table class="w-full table-auto"><thead class="bg-gray-50"><tr><th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">Name</th><th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">Email</th><th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">Role</th><th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">Last Login</th><th class="px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase">Actions</th></tr></thead><tbody class="bg-white divide-y divide-gray-200"></tbody></table></div>',1),ke=h('<input type="hidden" name="id">'),De=h('<h3 class="text-lg font-semibold mb-4"> </h3> <form class="space-y-4"><!> <!> <!> <div><label for="role" class="block text-sm font-medium text-gray-700">Role</label> <select id="role" name="role" required class="mt-1 w-full p-2 border rounded-md"><option>User</option><option>Admin</option></select></div> <div class="flex justify-end space-x-2 pt-4"><!> <!></div></form>',1),Ae=h('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"><!></div>'),Ie=h('<div class="space-y-4"><!></div> <!>',1);function Ke(se,X){me(X,!1);const Y=w();let le=xe(X,"data",8),f=w(le().users),y=w(""),C=w(!1),l=w(null),T=w("");function Z(v,i=3e3){n(T,v),setTimeout(()=>n(T,""),i)}function oe(v){const i=new FormData(v.target);e(l)?n(f,e(f).map(_=>_.id===e(l).id?{..._,name:i.get("name"),email:i.get("email"),role:i.get("role")}:_)):n(f,[...e(f),{id:String(e(f).length+1),name:i.get("name"),email:i.get("email"),role:i.get("role"),lastLogin:new Date().toISOString()}]),n(C,!1),n(l,null),Z(`User ${e(l)?"updated":"created"} successfully`)}function ie(v){confirm("Are you sure you want to delete this user?")&&(n(f,e(f).filter(i=>i.id!==v)),Z("User deleted successfully"))}pe(()=>(e(f),e(y)),()=>{n(Y,e(f).filter(v=>v.name.toLowerCase().includes(e(y).toLowerCase())||v.email.toLowerCase().includes(e(y).toLowerCase())||v.role.toLowerCase().includes(e(y).toLowerCase())))}),ue(),Ue();var ee=Ie(),G=R(ee),de=r(G);re(de,{children:(v,i)=>{var _=Se(),L=R(_),z=r(L),B=r(z);j(B,{name:"Users",class:"h-6 w-6"}),O(2),a(z);var P=s(z,2);N(P,{$$events:{click:()=>{n(l,null),n(C,!0)}},children:(c,o)=>{var d=Ce(),x=R(d);j(x,{name:"Plus",class:"h-4 w-4 mr-2"}),O(),u(c,d)},$$slots:{default:!0}}),a(L);var S=s(L,2),k=r(S);W(k,{type:"text",get value(){return e(y)},set value(c){n(y,c)},placeholder:"Search users...",class:"pl-10",children:(c,o)=>{j(c,{name:"Search",class:"absolute left-3 top-3 h-4 w-4 text-gray-400"})},$$slots:{default:!0},$$legacy:!0}),a(S);var D=s(S,2);K(D,()=>e(T),c=>{var o=Le(),d=r(o);a(o),U(()=>g(d,e(T))),Q(3,o,()=>V),u(c,o)});var A=s(D,2),F=r(A),I=s(r(F));he(I,5,()=>e(Y),c=>c.id,(c,o)=>{var d=Pe(),x=r(d),q=r(x);a(x);var $=s(x),M=r($);a($);var b=s($),H=r(b);a(b);var t=s(b),m=r(t);U(()=>g(m,new Date(e(o).lastLogin).toLocaleString())),a(t);var p=s(t),E=r(p);N(E,{variant:"ghost",$$events:{click:()=>{n(l,e(o)),n(C,!0)}},children:(J,ce)=>{j(J,{name:"Edit2",class:"h-4 w-4"})},$$slots:{default:!0}});var ve=s(E,2);N(ve,{variant:"ghost",$$events:{click:()=>ie(e(o).id)},children:(J,ce)=>{j(J,{name:"Trash2",class:"h-4 w-4 text-red-500"})},$$slots:{default:!0}}),a(p),a(d),U(()=>{g(q,e(o).name),g(M,e(o).email),g(H,e(o).role)}),Q(3,d,()=>V),u(c,d)}),a(I),a(F),a(A),u(v,_)},$$slots:{default:!0}}),a(G);var ne=s(G,2);K(ne,()=>e(C),v=>{var i=Ae(),_=r(i);re(_,{class:"w-full max-w-md",children:(L,z)=>{var B=De(),P=R(B),S=r(P);a(P);var k=s(P,2),D=r(k);K(D,()=>e(l),t=>{var m=ke();ge(m),U(()=>ye(m,e(l).id)),u(t,m)});var A=s(D,2),F=ae(()=>{var t;return((t=e(l))==null?void 0:t.name)??""});W(A,{type:"text",name:"name",label:"Name",required:!0,get value(){return e(F)}});var I=s(A,2),c=ae(()=>{var t;return((t=e(l))==null?void 0:t.email)??""});W(I,{type:"email",name:"email",label:"Email",required:!0,get value(){return e(c)}});var o=s(I,2),d=s(r(o),2);$e(d,()=>{var t;return((t=e(l))==null?void 0:t.role)??"user"});var x,q=r(d);q.value=(q.__value="user")==null?"":"user";var $=s(q);$.value=($.__value="admin")==null?"":"admin",a(d),a(o);var M=s(o,2),b=r(M);N(b,{type:"button",variant:"secondary",$$events:{click:()=>{n(C,!1),n(l,null)}},children:(t,m)=>{O();var p=te("Cancel");u(t,p)},$$slots:{default:!0}});var H=s(b,2);N(H,{type:"submit",children:(t,m)=>{O();var p=te();U(()=>g(p,e(l)?"Save Changes":"Create User")),u(t,p)},$$slots:{default:!0}}),a(M),a(k),U(()=>{var t,m,p,E;g(S,e(l)?"Edit User":"Add New User"),x!==(x=((t=e(l))==null?void 0:t.role)??"user")&&(d.value=(d.__value=((m=e(l))==null?void 0:m.role)??"user")==null?"":((p=e(l))==null?void 0:p.role)??"user",be(d,((E=e(l))==null?void 0:E.role)??"user"))}),_e("submit",k,we(oe)),u(L,B)},$$slots:{default:!0}}),a(i),Q(3,i,()=>V),u(v,i)}),u(se,ee),fe()}export{Ke as component};
