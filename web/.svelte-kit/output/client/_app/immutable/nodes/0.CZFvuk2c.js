import{c as P,a as b,t as K}from"../chunks/disclose-version.CJFPsRL-.js";import{p as la,l as g,b as ma,f as D,a as ca,t as I,g as e,m as h,c as t,r as a,n as da,s as c,d as x,j as fa}from"../chunks/runtime.CUNFE6o5.js";import{e as R,s as W}from"../chunks/render.YXdxLiCJ.js";import{p as ua,i as pa}from"../chunks/props.D6-fppJ3.js";import{e as va,i as _a}from"../chunks/Icon.Bvhz2f0e.js";import{g as ba,b as q,s as ga}from"../chunks/index.CnPSb7tb.js";import{c as ha}from"../chunks/svelte-component.CIsdkGy0.js";import{s as M}from"../chunks/class.Cz7S4UMx.js";import{i as xa}from"../chunks/lifecycle.CDJD4jvc.js";import{s as ya,a as G,b as J}from"../chunks/store.BcJSs_Hw.js";import{p as wa}from"../chunks/stores.D53sJoNF.js";import{d as Q,w as Ca}from"../chunks/index.BJF6aWVF.js";import{g as Sa}from"../chunks/entry.Dqyu0HAP.js";import{M as ka,S as Da,C as Ia,B as Ma,U as za}from"../chunks/users.BX4BJP6J.js";import{H as Ba}from"../chunks/house.C213w7pk.js";import{T as Ua}from"../chunks/thermometer-sun.CVsNLU42.js";import{D as Aa}from"../chunks/droplet.lEL7--kX.js";import{B as Ha}from"../chunks/bell.2awtJ6Ul.js";import{S as La}from"../chunks/settings.BuYUDVRY.js";import{Z as Ta}from"../chunks/zap.BJIn6b88.js";function ja(){const{subscribe:s,set:r,update:f}=Ca(null);return{subscribe:s,set:r,update:f,logout:()=>{r(null)},updateUser:o=>{r(o)}}}const d=ja();Q(d,s=>!!s);Q(d,s=>(s==null?void 0:s.role)==="admin");var Fa=K('<a><!> <span class="ml-3"> </span></a>'),Za=K('<nav class="bg-white shadow-sm fixed w-full z-50"><div class="mx-auto px-4"><div class="flex justify-between h-16"><div class="flex items-center"><button class="p-2 rounded-md text-gray-400 hover:text-gray-500 focus:outline-none"><!></button> <div class="ml-4 font-semibold text-xl">CoachHub</div></div> <div class="flex items-center"><span class="mr-4"> </span> <button class="px-3 py-2 rounded text-sm text-gray-700 hover:bg-gray-100">Logout</button></div></div></div></nav> <div><nav class="mt-5"></nav></div> <main><div class="p-6"><!></div></main>',1);function nt(s,r){la(r,!1);const f=ya(),o=()=>G(d,"$user",f),z=()=>G(wa,"$page",f),B=h(),y=h(),U=h();let A=ua(r,"data",8),u=h(!0);const H=[{icon:Ba,label:"Dashboard",href:"/dashboard"},{icon:Da,label:"Interior Devices",href:"/interior"},{icon:Ia,label:"Exterior Devices",href:"/exterior"},{icon:Ua,label:"Climate Control",href:"/climate"},{icon:Aa,label:"Status Panel",href:"/status"},{icon:Ha,label:"Notifications",href:"/notifications"}],V=[{icon:La,label:"System Config",href:"/admin/system"},{icon:Ma,label:"Coach Config",href:"/admin/coach"},{icon:Ta,label:"Automations",href:"/admin/automations"},{icon:za,label:"User Management",href:"/admin/users"}];function X(){J(d,null),Sa("/login")}const Y=ba(),[$,Ea]=Y;g(()=>fa(A()),()=>{J(d,A().user)}),g(()=>o(),()=>{x(B,!!o())}),g(()=>o(),()=>{var n;x(y,(n=o())==null?void 0:n.role)}),g(()=>e(y),()=>{x(U,e(y)==="admin"?[...H,...V]:H)}),ma(),xa();var L=P(),aa=D(L);pa(aa,()=>e(B)&&!z().url.pathname.startsWith("/login"),n=>{var i=Za(),l=D(i),T=t(l),j=t(T),w=t(j),C=t(w),ta=t(C);ka(ta,{size:24}),a(C),da(2),a(w);var F=c(w,2),S=t(F),ea=t(S);a(S);var sa=c(S,2);a(F),a(j),a(T),a(l);var p=c(l,2),Z=t(p);va(Z,5,()=>e(U),_a,(v,_)=>{var m=Fa();I(()=>ga(m,"href",$(e(_).href,void 0)));var N=t(m);ha(N,()=>e(_).icon,(na,ia)=>{ia(na,{size:20})});var O=c(N,2),oa=t(O);a(O),a(m),I(()=>{M(m,`flex items-center px-6 py-3 text-gray-600 hover:bg-gray-100 
                    ${(z().url.pathname===e(_).href?"bg-gray-100":"")??""}`),W(oa,e(_).label)}),b(v,m)}),a(Z),a(p);var k=c(p,2),E=t(k),ra=t(E);q(ra,r,"default",{}),a(E),a(k),I(()=>{var v;W(ea,(v=o())==null?void 0:v.email),M(p,`fixed inset-y-0 left-0 transform ${(e(u)?"translate-x-0":"-translate-x-full")??""}
        w-64 bg-white shadow-lg transition-transform duration-200 ease-in-out z-40 pt-16`),M(k,`pt-16 ${(e(u)?"ml-64":"ml-0")??""} transition-all duration-200 ease-in-out`)}),R("click",C,()=>x(u,!e(u))),R("click",sa,X),b(n,i)},n=>{var i=P(),l=D(i);q(l,r,"default",{}),b(n,i)}),b(s,L),ca()}export{nt as component};
