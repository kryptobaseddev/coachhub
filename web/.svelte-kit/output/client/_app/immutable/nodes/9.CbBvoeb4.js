import{a as o,t as g,b as ve,c as xe}from"../chunks/disclose-version.CJFPsRL-.js";import{p as ee,a as te,c as a,n as Y,r as t,s as d,t as k,g as e,i as Q,f as be,l as ye,b as he,m as Te,d as ce,j as $e}from"../chunks/runtime.CUNFE6o5.js";import{p as ae,i as V}from"../chunks/props.D6-fppJ3.js";import{i as se}from"../chunks/lifecycle.CDJD4jvc.js";import{s as we,a as Fe}from"../chunks/store.BcJSs_Hw.js";import{i as je}from"../chunks/demoMode.ClaLBl7d.js";import{s as j,e as q}from"../chunks/render.YXdxLiCJ.js";import{e as Z,i as Ce}from"../chunks/Icon.Bvhz2f0e.js";import{r as oe,s as B}from"../chunks/index.CnPSb7tb.js";import{t as N,s as me}from"../chunks/class.Cz7S4UMx.js";import{t as R,s as W}from"../chunks/index.D3NlNEen.js";import{b as ne}from"../chunks/input.BTYOOzm3.js";import{b as De}from"../chunks/select.C4s-v16H.js";import{c as re}from"../chunks/index-client.Cowl8BPV.js";import{T as He}from"../chunks/thermometer.DXyoWYjY.js";import{D as ke,F as Ie}from"../chunks/footprints.Vo_abwW-.js";import{F as Me}from"../chunks/fan.CT-BsUfV.js";import{P as ue}from"../chunks/power.CL2wjaEd.js";var ze=g("<option> </option>"),Ee=g('<div class="space-y-4"><div><label class="text-sm text-gray-600 block mb-2">Target Temperature</label> <input type="range" min="60" max="85" class="w-full"> <div class="flex justify-between text-sm text-gray-500 mt-1"><span>60°F</span> <span> </span> <span>85°F</span></div></div> <div class="p-3 rounded-md text-sm"><!></div></div>'),Pe=g('<div class="p-4"><div class="flex justify-between items-start mb-4"><div><h3 class="font-medium"> </h3> <div class="flex items-center space-x-4 mt-1"><div class="text-3xl font-bold"> </div> <div class="text-sm text-gray-500 flex items-center space-x-1"><!> <span> </span></div></div></div> <div class="flex items-center space-x-2"><select class="form-select rounded-md border-gray-300"></select></div></div> <!></div>'),Ae=g('<div class="bg-white rounded-lg shadow"><div class="p-4 border-b"><div class="flex items-center space-x-2"><!> <h2 class="text-lg font-medium">Thermostats</h2></div></div> <div class="divide-y"></div></div>');function Le(P,b){ee(b,!1);let y=ae(b,"thermostats",8);const I=re(),l=["off","heat","cool","auto"],h={heat:"🔥",cool:"❄️",auto:"🔄",off:"⭕"};function c(i,s){I("update",{deviceId:i.id,type:"thermostats",updates:s})}se();var m=Ae(),f=a(m),C=a(f),u=a(C);He(u,{class:"text-red-500"}),Y(2),t(C),t(f);var r=d(f,2);Z(r,5,y,i=>i.id,(i,s)=>{var v=Pe(),n=a(v),$=a(n),_=a($),x=a(_);t(_);var D=d(_,2),A=a(D),L=a(A);t(A);var M=d(A,2),w=a(M);ke(w,{size:16});var H=d(w,2),J=a(H);t(H),t(M),t(D),t($);var F=d($,2),z=a(F);k(()=>{e(s).mode,Q(()=>{})}),Z(z,5,()=>l,Ce,(S,p)=>{var T=ze(),G={},U=a(T);k(()=>j(U,`${h[e(p)]??""} ${e(p).charAt(0).toUpperCase()+e(p).slice(1)}`)),t(T),k(()=>{G!==(G=e(p))&&(T.value=(T.__value=e(p))==null?"":e(p))}),o(S,T)}),t(z),t(F),t(n);var O=d(n,2);V(O,()=>e(s).mode!=="off",S=>{var p=Ee(),T=a(p),G=a(T),U=d(G,2);oe(U);var le=d(U,2),pe=d(a(le),2),_e=a(pe);t(pe),Y(2),t(le),t(T);var E=d(T,2),ge=a(E);V(ge,()=>e(s).currentTemp<e(s).targetTemp,K=>{var X=ve("Heating to target temperature...");o(K,X)},K=>{var X=xe(),fe=be(X);V(fe,()=>e(s).currentTemp>e(s).targetTemp,ie=>{var de=ve("Cooling to target temperature...");o(ie,de)},ie=>{var de=ve("Target temperature reached");o(ie,de)},!0),o(K,X)}),t(E),t(p),k(()=>{B(G,"for",`target-temp-${e(s).id??""}`),B(U,"id",`target-temp-${e(s).id??""}`),j(_e,`${e(s).targetTemp??""}°F`),N(E,"bg-red-50",e(s).mode==="heat"),N(E,"bg-blue-50",e(s).mode==="cool"),N(E,"bg-purple-50",e(s).mode==="auto"),N(E,"text-red-600",e(s).mode==="heat"),N(E,"text-blue-600",e(s).mode==="cool"),N(E,"text-purple-600",e(s).mode==="auto")}),ne(U,()=>e(s).targetTemp,K=>(e(s).targetTemp=K,Q(()=>y()))),q("change",U,()=>c(e(s),{targetTemp:e(s).targetTemp})),R(3,p,()=>W),o(S,p)}),t(v),k(()=>{j(x,e(s).name),j(L,`${e(s).currentTemp??""}°F`),j(J,`${e(s).humidity??""}% humidity`)}),De(z,()=>e(s).mode,S=>(e(s).mode=S,Q(()=>y()))),q("change",z,()=>c(e(s),{mode:e(s).mode})),R(3,v,()=>W),o(i,v)}),t(r),t(m),o(P,m),te()}var Oe=g('<div class="mt-4 space-y-2"><div class="flex justify-between"><label class="text-sm text-gray-600">Fan Speed</label> <span class="text-sm font-medium"> </span></div> <input type="range" min="0" max="3" class="w-full"></div>'),Se=g('<div class="p-4"><div class="flex items-center justify-between mb-2"><span class="font-medium"> </span> <button><!></button></div> <!></div>'),Ue=g('<div class="bg-white rounded-lg shadow"><div class="p-4 border-b"><div class="flex items-center space-x-2"><!> <h2 class="text-lg font-medium">Ventilation Fans</h2></div></div> <div class="divide-y"></div></div>');function Ve(P,b){ee(b,!1);let y=ae(b,"fans",8);const I=re(),l=["Off","Low","Medium","High"];function h(r,i){I("update",{deviceId:r.id,type:"ventFans",updates:i})}se();var c=Ue(),m=a(c),f=a(m),C=a(f);Me(C,{class:"text-green-500"}),Y(2),t(f),t(m);var u=d(m,2);Z(u,5,y,r=>r.id,(r,i)=>{var s=Se(),v=a(s),n=a(v),$=a(n);t(n);var _=d(n,2),x=a(_);ue(x,{size:16}),t(_),t(v);var D=d(v,2);V(D,()=>e(i).state==="on",A=>{var L=Oe(),M=a(L),w=a(M),H=d(w,2),J=a(H);t(H),t(M);var F=d(M,2);oe(F),t(L),k(()=>{B(w,"for",`fan-speed-${e(i).id??""}`),j(J,l[e(i).speed]),B(F,"id",`fan-speed-${e(i).id??""}`)}),ne(F,()=>e(i).speed,z=>(e(i).speed=z,Q(()=>y()))),q("change",F,()=>h(e(i),{speed:e(i).speed,state:e(i).speed===0?"off":"on"})),o(A,L)}),t(s),k(()=>{j($,e(i).name),me(_,`p-2 rounded-full ${(e(i).state==="on"?"bg-green-100 text-green-600":"bg-gray-100 text-gray-600")??""}`)}),q("click",_,()=>h(e(i),{state:e(i).state==="on"?"off":"on",speed:e(i).state==="on"?0:1})),R(3,s,()=>W),o(r,s)}),t(u),t(c),o(P,c),te()}var Je=g('<div class="bg-orange-50 text-orange-600 p-3 rounded-md text-sm">Heating to target temperature...</div>'),Ne=g('<div class="space-y-2"><div class="flex justify-between"><label class="text-sm text-gray-600">Target Temperature</label> <span class="text-sm font-medium"> </span></div> <input type="range" min="65" max="85" step="1" class="w-full"> <div class="flex justify-between text-sm text-gray-500"><span>65°F</span> <span>85°F</span></div> <!></div>'),qe=g('<div class="p-4"><div class="flex items-center justify-between mb-4"><div><span class="font-medium"> </span> <div class="text-sm text-gray-500 mt-1"> </div></div> <button><!></button></div> <!></div>'),Be=g('<div class="bg-white rounded-lg shadow"><div class="p-4 border-b"><div class="flex items-center space-x-2"><!> <h2 class="text-lg font-medium">Heated Floors</h2></div></div> <div class="divide-y"></div></div>');function Ge(P,b){ee(b,!1);let y=ae(b,"floors",8);const I=re();function l(u,r){I("update",{deviceId:u.id,type:"heatedFloors",updates:r})}se();var h=Be(),c=a(h),m=a(c),f=a(m);Ie(f,{class:"text-orange-500"}),Y(2),t(m),t(c);var C=d(c,2);Z(C,5,y,u=>u.id,(u,r)=>{var i=qe(),s=a(i),v=a(s),n=a(v),$=a(n);t(n);var _=d(n,2),x=a(_);t(_),t(v);var D=d(v,2),A=a(D);ue(A,{size:16}),t(D),t(s);var L=d(s,2);V(L,()=>e(r).state==="on",M=>{var w=Ne(),H=a(w),J=a(H),F=d(J,2),z=a(F);t(F),t(H);var O=d(H,2);oe(O);var S=d(O,4);V(S,()=>e(r).currentTemp<e(r).targetTemp,p=>{var T=Je();o(p,T)}),t(w),k(()=>{B(J,"for",`target-temp-${e(r).id??""}`),j(z,`${e(r).targetTemp??""}°F`),B(O,"id",`target-temp-${e(r).id??""}`)}),ne(O,()=>e(r).targetTemp,p=>(e(r).targetTemp=p,Q(()=>y()))),q("change",O,()=>l(e(r),{targetTemp:e(r).targetTemp})),R(3,w,()=>W),o(M,w)}),t(i),k(()=>{j($,e(r).name),j(x,`Current: ${e(r).currentTemp??""}°F`),me(D,`p-2 rounded-full ${(e(r).state==="on"?"bg-orange-100 text-orange-600":"bg-gray-100 text-gray-600")??""}`)}),q("click",D,()=>l(e(r),{state:e(r).state==="on"?"off":"on"})),R(3,i,()=>W),o(u,i)}),t(C),t(h),o(P,h),te()}var Ke=g('<span class="px-3 py-1 bg-yellow-100 text-yellow-800 rounded-full text-sm">Demo Mode</span>'),Qe=g('<div class="space-y-6"><div class="flex justify-between items-center"><h1 class="text-2xl font-bold text-gray-900">Climate Control</h1> <!></div> <div class="grid grid-cols-1 lg:grid-cols-2 gap-6"><!> <!></div> <!></div>');function mt(P,b){ee(b,!1);const y=we(),I=()=>Fe(je,"$isDemoMode",y),l=Te();let h=ae(b,"data",8);re();async function c(v){const{deviceId:n,type:$,updates:_}=v.detail;if(I())ce(l,{...e(l),[$]:e(l)[$].map(x=>x.id===n?{...x,..._}:x)});else try{if(!(await fetch(`/api/devices/${n}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(_)})).ok)throw new Error("Failed to update device")}catch(x){console.error("Error updating device:",x)}}ye(()=>(e(l),$e(h())),()=>{(v=>ce(l,v.devices))(h())}),he(),se();var m=Qe(),f=a(m),C=d(a(f),2);V(C,I,v=>{var n=Ke();o(v,n)}),t(f);var u=d(f,2),r=a(u);Le(r,{get thermostats(){return e(l).thermostats},$$events:{update:c}});var i=d(r,2);Ve(i,{get fans(){return e(l).ventFans},$$events:{update:c}}),t(u);var s=d(u,2);Ge(s,{get floors(){return e(l).heatedFloors},$$events:{update:c}}),t(m),o(P,m),te()}export{mt as component};
