import{a as w,t as $}from"../chunks/disclose-version.CJFPsRL-.js";import{p as O,l as W,b as Y,t as A,a as S,c as t,n as L,r as e,s as i,d as R,j as B,g as a,i as re,m as J,f as le,e as ce}from"../chunks/runtime.CUNFE6o5.js";import{p as q,i as N}from"../chunks/props.D6-fppJ3.js";import{i as G}from"../chunks/lifecycle.CDJD4jvc.js";import{s as pe,a as me}from"../chunks/store.BcJSs_Hw.js";import{i as fe}from"../chunks/demoMode.ClaLBl7d.js";import{e as P,s as M}from"../chunks/render.YXdxLiCJ.js";import{e as ie}from"../chunks/Icon.Bvhz2f0e.js";import{r as Z,s as U}from"../chunks/index.CnPSb7tb.js";import{s as de}from"../chunks/class.Cz7S4UMx.js";import{t as ee,s as te}from"../chunks/index.D3NlNEen.js";import{b as ae}from"../chunks/input.BTYOOzm3.js";import{c as K}from"../chunks/index-client.Cowl8BPV.js";import{L as ue}from"../chunks/lightbulb.Dzk891xp.js";import{P as oe}from"../chunks/power.CL2wjaEd.js";import{U as ge,F as se}from"../chunks/umbrella.Cu7e32Qf.js";import{C as be,a as _e}from"../chunks/chevron-up.Clfxynmh.js";import{T as xe}from"../chunks/thermometer-sun.CVsNLU42.js";var ye=$('<div class="mt-4"><label class="text-sm text-gray-600 block mb-2">Brightness</label> <input type="range" min="0" max="100" class="w-full"> <div class="flex justify-between text-sm text-gray-500 mt-1"><span>0%</span> <span>100%</span></div></div>'),he=$('<div class="p-4"><div class="flex items-center justify-between mb-2"><span class="font-medium"> </span> <button><!></button></div> <!></div>'),we=$('<div class="bg-white rounded-lg shadow"><div class="p-4 border-b flex justify-between items-center"><div class="flex items-center space-x-2"><!> <h2 class="text-lg font-medium">Exterior Lights</h2></div> <span class="text-sm text-gray-500"> </span></div> <div class="divide-y"></div></div>');function $e(k,y){O(y,!1);const p=J();let u=q(y,"lights",8);const s=K();function T(o,r){s("update",{deviceId:o.id,type:"lights",updates:r})}W(()=>B(u()),()=>{R(p,u().filter(o=>o.state==="on").length)}),Y(),G();var m=we(),c=t(m),f=t(c),H=t(f);ue(H,{class:"text-yellow-500"}),L(2),e(f);var h=i(f,2),v=t(h);e(h),e(c);var d=i(c,2);ie(d,5,u,o=>o.id,(o,r)=>{var l=he(),b=t(l),_=t(b),n=t(_);e(_);var j=i(_,2),C=t(j);oe(C,{size:16}),e(j),e(b);var D=i(b,2);N(D,()=>a(r).state==="on",F=>{var x=ye(),E=t(x),g=i(E,2);Z(g),L(2),e(x),A(()=>{U(E,"for",`brightness-${a(r).id??""}`),U(g,"id",`brightness-${a(r).id??""}`)}),ae(g,()=>a(r).brightness,I=>(a(r).brightness=I,re(()=>u()))),P("change",g,()=>T(a(r),{brightness:a(r).brightness})),w(F,x)}),e(l),A(()=>{M(n,a(r).name),de(j,`p-2 rounded-full ${(a(r).state==="on"?"bg-yellow-100 text-yellow-600":"bg-gray-100 text-gray-600")??""}`)}),P("click",j,()=>T(a(r),{state:a(r).state==="on"?"off":"on"})),ee(3,l,()=>te),w(o,l)}),e(d),e(m),A(()=>M(v,`${a(p)??""} of ${u().length??""} active`)),w(k,m),S()}var Te=$('<div class="p-4"><div class="flex items-center justify-between mb-4"><span class="font-medium"> </span> <div class="flex space-x-2"><button class="p-2 rounded-full bg-gray-100 hover:bg-gray-200" title="Retract"><!></button> <button class="p-2 rounded-full bg-gray-100 hover:bg-gray-200" title="Extend"><!></button></div></div> <div class="space-y-2"><div class="flex justify-between"><label class="text-sm text-gray-600">Position</label> <span class="text-sm font-medium"> </span></div> <input type="range" min="0" max="100" class="w-full"></div></div>'),He=$('<div class="bg-white rounded-lg shadow"><div class="p-4 border-b"><div class="flex items-center space-x-2"><!> <h2 class="text-lg font-medium">Awnings</h2></div></div> <div class="divide-y"></div></div>');function je(k,y){O(y,!1);let p=q(y,"awnings",8);const u=K();function s(v,d){u("update",{deviceId:v.id,type:"awnings",updates:d})}function T(v){return v===0?"Retracted":v===100?"Extended":`${v}% Extended`}G();var m=He(),c=t(m),f=t(c),H=t(f);ge(H,{class:"text-blue-500"}),L(2),e(f),e(c);var h=i(c,2);ie(h,5,p,v=>v.id,(v,d)=>{var o=Te(),r=t(o),l=t(r),b=t(l);e(l);var _=i(l,2),n=t(_),j=t(n);be(j,{size:16}),e(n);var C=i(n,2),D=t(C);_e(D,{size:16}),e(C),e(_),e(r);var F=i(r,2),x=t(F),E=t(x),g=i(E,2),I=t(g);A(()=>M(I,T(a(d).position))),e(g),e(x);var z=i(x,2);Z(z),e(F),e(o),A(()=>{M(b,a(d).name),U(E,"for",`position-${a(d).id??""}`),U(z,"id",`position-${a(d).id??""}`)}),P("click",n,()=>s(a(d),{position:0})),P("click",C,()=>s(a(d),{position:100})),ae(z,()=>a(d).position,Q=>(a(d).position=Q,re(()=>p()))),P("change",z,()=>s(a(d),{position:a(d).position})),ee(3,o,()=>te),w(v,o)}),e(h),e(m),w(k,m),S()}var Ee=$('<div class="bg-red-50 text-red-600 p-3 rounded-md flex items-center space-x-2"><!> <span class="text-sm">Heating to target temperature...</span></div>'),ke=$('<div><label class="text-sm text-gray-600 block mb-2">Target Temperature</label> <input type="range" min="100" max="140" step="5" class="w-full"> <div class="flex justify-between text-sm text-gray-500 mt-1"><span>100째F</span> <span> </span> <span>140째F</span></div></div> <!>',1),Ce=$('<div class="bg-white rounded-lg shadow"><div class="p-4 border-b"><div class="flex items-center space-x-2"><!> <h2 class="text-lg font-medium">Water Heater</h2></div></div> <div class="p-4 space-y-6"><div class="flex items-center justify-between"><div class="flex items-center space-x-4"><!> <div><div class="text-2xl font-bold"> </div> <div class="text-sm text-gray-500">Current Temperature</div></div></div> <button><!></button></div> <!></div></div>');function De(k,y){O(y,!1);const p=J(),u=J();let s=q(y,"heater",12);const T=K();function m(D){T("update",{deviceId:s().id,type:"waterHeater",updates:D})}W(()=>B(s()),()=>{R(p,s().state==="on")}),W(()=>(a(p),B(s())),()=>{R(u,a(p)&&s().temperature<s().targetTemp)}),Y(),G();var c=Ce(),f=t(c),H=t(f),h=t(H);se(h,{class:"text-red-500"}),L(2),e(H),e(f);var v=i(f,2),d=t(v),o=t(d),r=t(o);xe(r,{size:24,class:"text-gray-400"});var l=i(r,2),b=t(l),_=t(b);e(b),L(2),e(l),e(o);var n=i(o,2),j=t(n);oe(j,{size:20}),e(n),e(d);var C=i(d,2);N(C,()=>a(p),D=>{var F=ke(),x=le(F),E=t(x),g=i(E,2);Z(g);var I=i(g,2),z=i(t(I),2),Q=t(z);e(z),L(2),e(I),e(x);var ne=i(x,2);N(ne,()=>a(u),V=>{var X=Ee(),ve=t(X);se(ve,{size:16}),L(2),e(X),w(V,X)}),A(()=>{U(E,"for",`target-temp-${s().id??""}`),U(g,"id",`target-temp-${s().id??""}`),M(Q,`${s().targetTemp??""}째F`)}),ae(g,()=>s().targetTemp,V=>s(s().targetTemp=V,!0)),P("change",g,()=>m({targetTemp:s().targetTemp})),ee(3,x,()=>te),w(D,F)}),e(v),e(c),A(()=>{M(_,`${s().temperature??""}째F`),de(n,`p-3 rounded-full ${(a(p)?"bg-red-100 text-red-600":"bg-gray-100 text-gray-600")??""}`)}),P("click",n,()=>m({state:a(p)?"off":"on"})),w(k,c),S()}var Fe=$('<span class="px-3 py-1 bg-yellow-100 text-yellow-800 rounded-full text-sm">Demo Mode</span>'),ze=$('<div class="space-y-6"><div class="flex justify-between items-center"><h1 class="text-2xl font-bold text-gray-900">Exterior Devices</h1> <!></div> <div class="grid grid-cols-1 lg:grid-cols-2 gap-6"><!> <!></div> <!></div>');function Xe(k,y){O(y,!1);const p=pe(),u=()=>me(fe,"$isDemoMode",p),s=J();let T=q(y,"data",8);K();async function m(r){const{deviceId:l,type:b,updates:_}=r.detail;if(u())b==="waterHeater"?ce(s,a(s).waterHeater={...a(s).waterHeater,..._}):R(s,{...a(s),[b]:a(s)[b].map(n=>n.id===l?{...n,..._}:n)});else try{if(!(await fetch(`/api/devices/${l}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(_)})).ok)throw new Error("Failed to update device")}catch(n){console.error("Error updating device:",n)}}W(()=>(a(s),B(T())),()=>{(r=>R(s,r.devices))(T())}),Y(),G();var c=ze(),f=t(c),H=i(t(f),2);N(H,u,r=>{var l=Fe();w(r,l)}),e(f);var h=i(f,2),v=t(h);$e(v,{get lights(){return a(s).lights},$$events:{update:m}});var d=i(v,2);De(d,{get heater(){return a(s).waterHeater},$$events:{update:m}}),e(h);var o=i(h,2);je(o,{get awnings(){return a(s).awnings},$$events:{update:m}}),e(c),w(k,c),S()}export{Xe as component};
