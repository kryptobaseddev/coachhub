import{a as _,t as g}from"../chunks/disclose-version.CJFPsRL-.js";import{p as Z,l as pe,b as me,t as H,a as ee,c as a,s as i,g as e,d as z,m as B,n as F,r as t,j as fe,i as ke,h as Se}from"../chunks/runtime.CUNFE6o5.js";import{p as te,i as J}from"../chunks/props.D6-fppJ3.js";import{i as ae}from"../chunks/lifecycle.CDJD4jvc.js";import{s as Ne,a as Me}from"../chunks/store.BcJSs_Hw.js";import{i as $e}from"../chunks/demoMode.ClaLBl7d.js";import{s as X,e as I}from"../chunks/render.YXdxLiCJ.js";import{e as ue,i as ze}from"../chunks/Icon.Bvhz2f0e.js";import{c as _e}from"../chunks/svelte-component.CIsdkGy0.js";import{s as de}from"../chunks/class.Cz7S4UMx.js";import{t as le,f as Ce,s as De}from"../chunks/index.D3NlNEen.js";import{b as Ee}from"../chunks/select.C4s-v16H.js";import{c as se}from"../chunks/index-client.Cowl8BPV.js";import{B as Y}from"../chunks/bell.2awtJ6Ul.js";import{E as Te,C as ce,M as je}from"../chunks/mail.BNjh9s9Z.js";import{T as Ae}from"../chunks/trash-2.dVfbSBcP.js";import{I as Fe}from"../chunks/info.2roawCq9.js";import{C as Ie}from"../chunks/circle-alert.BCT1uT6i.js";import{r as V}from"../chunks/index.CnPSb7tb.js";import{a as W}from"../chunks/input.BTYOOzm3.js";import{S as ve}from"../chunks/settings.BuYUDVRY.js";import{S as Pe}from"../chunks/shield.e3pJPTNF.js";var Re=g('<button class="flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 w-full"><!> Mark as read</button>'),Be=g('<div class="absolute right-0 mt-2 w-48 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 z-10"><div class="py-1"><!> <button class="flex items-center px-4 py-2 text-sm text-red-600 hover:bg-gray-100 w-full"><!> Delete</button></div></div>'),Le=g('<div><div class="flex items-start space-x-3"><div class="flex-shrink-0"><!></div> <div class="flex-grow"><p> </p> <p class="text-xs text-gray-500 mt-1"> </p></div> <div class="flex-shrink-0 relative"><button class="p-1 rounded-full hover:bg-gray-100"><!></button> <!></div></div></div>'),Oe=g('<div class="divide-y"></div>'),Ue=g('<div class="p-8 text-center text-gray-500">No notifications found</div>'),qe=g('<div class="bg-white rounded-lg shadow"><div class="p-4 border-b flex justify-between items-center"><div class="flex items-center space-x-2"><!> <h2 class="text-lg font-medium">Notifications</h2></div> <select class="form-select rounded-md border-gray-300 text-sm"><option>All</option><option>Unread</option><option>Read</option></select></div> <!></div>');function He(P,y){Z(y,!1);const o=B();let w=te(y,"notifications",8);const d=se();let l=B("all"),v=B(new Set);function C(s){switch(s){case"warning":return Ie;case"success":return ce;default:return Fe}}function E(s){switch(s){case"warning":return"yellow";case"success":return"green";default:return"blue"}}function x(s){e(v).has(s)?e(v).delete(s):e(v).add(s),z(v,e(v))}function k(s){return new Date(s).toLocaleString()}pe(()=>(fe(w()),e(l)),()=>{z(o,w().filter(s=>e(l)==="unread"?!s.read:e(l)==="read"?s.read:!0))}),me(),ae();var h=qe(),u=a(h),p=a(u),T=a(p);Y(T,{class:"text-gray-500"}),F(2),t(p);var S=i(p,2);H(()=>{e(l),ke(()=>{})});var N=a(S);N.value=(N.__value="all")==null?"":"all";var n=i(N);n.value=(n.__value="unread")==null?"":"unread";var c=i(n);c.value=(c.__value="read")==null?"":"read",t(S),t(u);var m=i(u,2);J(m,()=>e(o).length>0,s=>{var M=Oe();ue(M,5,()=>e(o),f=>f.id,(f,r)=>{var b=Le(),D=a(b),j=a(D),L=a(j),O=Se(()=>`text-${E(e(r).type)??""}-500`);_e(L,()=>C(e(r).type),(K,A)=>{A(K,{get class(){return e(O)},size:20})}),t(j);var R=i(j,2),$=a(R),G=a($);t($);var ie=i($,2),ge=a(ie);H(()=>X(ge,k(e(r).timestamp))),t(ie),t(R);var re=i(R,2),U=a(re),xe=a(U);Te(xe,{size:16}),t(U);var he=i(U,2);J(he,()=>e(v).has(e(r).id),K=>{var A=Be(),oe=a(A),ne=a(oe);J(ne,()=>!e(r).read,ye=>{var q=Re(),we=a(q);ce(we,{size:16,class:"mr-2"}),F(),t(q),I("click",q,()=>{d("action",{id:e(r).id,action:"markRead"}),x(e(r).id)}),_(ye,q)});var Q=i(ne,2),be=a(Q);Ae(be,{size:16,class:"mr-2"}),F(),t(Q),t(oe),t(A),I("click",Q,()=>{d("action",{id:e(r).id,action:"delete"}),x(e(r).id)}),le(3,A,()=>Ce),_(K,A)}),t(re),t(D),t(b),H(()=>{de(b,`p-4 relative ${(e(r).read?"bg-gray-50":"")??""}`),de($,`text-sm ${(e(r).read?"text-gray-600":"text-gray-900")??""}`),X(G,e(r).message)}),I("click",U,()=>x(e(r).id)),le(3,b,()=>De),_(f,b)}),t(M),_(s,M)},s=>{var M=Ue();_(s,M)}),t(h),Ee(S,()=>e(l),s=>z(l,s)),_(P,h),ee()}var Je=g('<label class="flex items-center space-x-3"><input type="checkbox" class="form-checkbox rounded text-blue-600"> <div class="flex items-center space-x-2"><!> <span> </span></div></label>'),Ge=g('<div class="bg-white rounded-lg shadow"><div class="p-4 border-b"><div class="flex items-center space-x-2"><!> <h2 class="text-lg font-medium">Notification Settings</h2></div></div> <div class="p-4 space-y-6"><div class="space-y-4"><h3 class="font-medium text-gray-900">Notification Methods</h3> <label class="flex items-center space-x-3"><input type="checkbox" class="form-checkbox rounded text-blue-600"> <div class="flex items-center space-x-2"><!> <span>Email Notifications</span></div></label> <label class="flex items-center space-x-3"><input type="checkbox" class="form-checkbox rounded text-blue-600"> <div class="flex items-center space-x-2"><!> <span>Push Notifications</span></div></label></div> <div class="space-y-4"><h3 class="font-medium text-gray-900">Notification Categories</h3> <!></div></div></div>');function Ke(P,y){Z(y,!1);let o=te(y,"settings",12);const w=se();function d(f){w("update",{updates:f})}const l=[{id:"system",label:"System Alerts",icon:ve},{id:"maintenance",label:"Maintenance",icon:Pe},{id:"security",label:"Security",icon:Y}];ae();var v=Ge(),C=a(v),E=a(C),x=a(E);ve(x,{class:"text-gray-500"}),F(2),t(E),t(C);var k=i(C,2),h=a(k),u=i(a(h),2),p=a(u);V(p);var T=i(p,2),S=a(T);je(S,{size:16}),F(2),t(T),t(u);var N=i(u,2),n=a(N);V(n);var c=i(n,2),m=a(c);Y(m,{size:16}),F(2),t(c),t(N),t(h);var s=i(h,2),M=i(a(s),2);ue(M,1,()=>l,ze,(f,r)=>{var b=Je(),D=a(b);V(D);var j=i(D,2),L=a(j);_e(L,()=>e(r).icon,($,G)=>{G($,{size:16})});var O=i(L,2),R=a(O);t(O),t(j),t(b),H(()=>X(R,e(r).label)),W(D,()=>o().categories[e(r).id],$=>o(o().categories[e(r).id]=$,!0)),I("change",D,()=>d({categories:{...o().categories,[e(r).id]:o().categories[e(r).id]}})),_(f,b)}),t(s),t(k),t(v),W(p,()=>o().email,f=>o(o().email=f,!0)),I("change",p,()=>d({email:o().email})),W(n,()=>o().push,f=>o(o().push=f,!0)),I("change",n,()=>d({push:o().push})),_(P,v),ee()}var Qe=g('<span class="px-3 py-1 bg-yellow-100 text-yellow-800 rounded-full text-sm">Demo Mode</span>'),Ve=g('<div class="space-y-6"><div class="flex justify-between items-center"><h1 class="text-2xl font-bold text-gray-900">Notifications</h1> <!></div> <div class="grid grid-cols-1 lg:grid-cols-3 gap-6"><div class="lg:col-span-2"><!></div> <div><!></div></div></div>');function xt(P,y){Z(y,!1);const o=Ne(),w=()=>Me($e,"$isDemoMode",o),d=B(),l=B();let v=te(y,"data",8);se();async function C(n){const{updates:c}=n.detail;if(w())z(l,{...e(l),...c});else try{if(!(await fetch("/api/notifications/settings",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)})).ok)throw new Error("Failed to update settings")}catch(m){console.error("Error updating settings:",m)}}async function E(n){const{id:c,action:m}=n.detail;if(w())m==="markRead"?z(d,e(d).map(s=>s.id===c?{...s,read:!0}:s)):m==="delete"&&z(d,e(d).filter(s=>s.id!==c));else try{if(!(await fetch(`/api/notifications/${c}/${m}`,{method:"POST"})).ok)throw new Error(`Failed to ${m} notification`)}catch(s){console.error("Error updating notification:",s)}}pe(()=>(e(d),e(l),fe(v())),()=>{(n=>(z(d,n.notifications),z(l,n.settings)))(v())}),me(),ae();var x=Ve(),k=a(x),h=i(a(k),2);J(h,w,n=>{var c=Qe();_(n,c)}),t(k);var u=i(k,2),p=a(u),T=a(p);He(T,{get notifications(){return e(d)},$$events:{action:E}}),t(p);var S=i(p,2),N=a(S);Ke(N,{get settings(){return e(l)},$$events:{update:C}}),t(S),t(u),t(x),_(P,x),ee()}export{xt as component};
