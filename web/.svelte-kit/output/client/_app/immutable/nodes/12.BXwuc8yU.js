import{a as w,t as $}from"../chunks/disclose-version.CJFPsRL-.js";import{p as B,t as I,a as H,c as a,n as U,r as s,s as o,g as t,i as W,l as te,b as se,m as ae,d as X,j as ie}from"../chunks/runtime.CUNFE6o5.js";import{p as T,i as q}from"../chunks/props.D6-fppJ3.js";import{i as J}from"../chunks/lifecycle.CDJD4jvc.js";import{s as re,a as oe}from"../chunks/store.BcJSs_Hw.js";import{i as de}from"../chunks/demoMode.ClaLBl7d.js";import{e as L,s as z}from"../chunks/render.YXdxLiCJ.js";import{e as G}from"../chunks/Icon.Bvhz2f0e.js";import{r as K,s as E}from"../chunks/index.CnPSb7tb.js";import{s as Y}from"../chunks/class.Cz7S4UMx.js";import{t as Q,s as R}from"../chunks/index.D3NlNEen.js";import{b as V}from"../chunks/input.BTYOOzm3.js";import{c as N}from"../chunks/index-client.Cowl8BPV.js";import{L as ne}from"../chunks/lightbulb.Dzk891xp.js";import{P as Z}from"../chunks/power.CL2wjaEd.js";import{F as ve}from"../chunks/fan.CT-BsUfV.js";import{B as le}from"../chunks/blinds.dnOIt88x.js";import{C as ce,a as pe}from"../chunks/chevron-up.Clfxynmh.js";var me=$('<div class="mt-4"><label class="text-sm text-gray-600 block mb-2">Brightness</label> <input type="range" min="0" max="100" class="w-full"></div>'),ue=$('<div class="p-4"><div class="flex items-center justify-between mb-2"><span class="font-medium"> </span> <button><!></button></div> <!></div>'),fe=$('<div class="bg-white rounded-lg shadow"><div class="p-4 border-b flex justify-between items-center"><div class="flex items-center space-x-2"><!> <h2 class="text-lg font-medium">Interior Lights</h2></div> <button class="px-3 py-1 text-sm rounded-md bg-gray-100 hover:bg-gray-200"> </button></div> <div class="divide-y"></div></div>');function be(D,f){B(f,!1);let m=T(f,"lights",8);const k=N();function d(e,i){k("update",{deviceId:e.id,type:"lights",updates:i})}J();var b=fe(),c=a(b),p=a(c),_=a(p);ne(_,{class:"text-yellow-500"}),U(2),s(p);var j=o(p,2),g=a(j);I(()=>z(g,m().every(e=>e.state==="on")?"All Off":"All On")),s(j),s(c);var r=o(c,2);G(r,5,m,e=>e.id,(e,i)=>{var n=ue(),l=a(n),x=a(l),u=a(x);s(x);var v=o(x,2),A=a(v);Z(A,{size:16}),s(v),s(l);var O=o(l,2);q(O,()=>t(i).state==="on",F=>{var y=me(),C=a(y),h=o(C,2);K(h),s(y),I(()=>{E(C,"for",`brightness-${t(i).id??""}`),E(h,"id",`brightness-${t(i).id??""}`)}),V(h,()=>t(i).brightness,M=>(t(i).brightness=M,W(()=>m()))),L("change",h,()=>d(t(i),{brightness:t(i).brightness})),w(F,y)}),s(n),I(()=>{z(u,t(i).name),Y(v,`p-2 rounded-full ${(t(i).state==="on"?"bg-yellow-100 text-yellow-600":"bg-gray-100 text-gray-600")??""}`)}),L("click",v,()=>d(t(i),{state:t(i).state==="on"?"off":"on"})),Q(3,n,()=>R),w(e,n)}),s(r),s(b),L("click",j,()=>{const e=m().every(i=>i.state==="on");m().forEach(i=>d(i,{state:e?"off":"on"}))}),w(D,b),H()}var _e=$('<div class="mt-4 space-y-2"><div class="flex justify-between"><label class="text-sm text-gray-600">Speed</label> <span class="text-sm font-medium"> </span></div> <input type="range" min="0" max="3" class="w-full"></div>'),ge=$('<div class="p-4"><div class="flex items-center justify-between mb-2"><span class="font-medium"> </span> <button><!></button></div> <!></div>'),xe=$('<div class="bg-white rounded-lg shadow"><div class="p-4 border-b"><div class="flex items-center space-x-2"><!> <h2 class="text-lg font-medium">Fans</h2></div></div> <div class="divide-y"></div></div>');function ye(D,f){B(f,!1);let m=T(f,"fans",8);const k=N(),d=["Off","Low","Medium","High"];function b(r,e){k("update",{deviceId:r.id,type:"fans",updates:e})}J();var c=xe(),p=a(c),_=a(p),j=a(_);ve(j,{class:"text-blue-500"}),U(2),s(_),s(p);var g=o(p,2);G(g,5,m,r=>r.id,(r,e)=>{var i=ge(),n=a(i),l=a(n),x=a(l);s(l);var u=o(l,2),v=a(u);Z(v,{size:16}),s(u),s(n);var A=o(n,2);q(A,()=>t(e).state==="on",O=>{var F=_e(),y=a(F),C=a(y),h=o(C,2),M=a(h);s(h),s(y);var P=o(y,2);K(P),s(F),I(()=>{E(C,"for",`speed-${t(e).id??""}`),z(M,d[t(e).speed]),E(P,"id",`speed-${t(e).id??""}`)}),V(P,()=>t(e).speed,S=>(t(e).speed=S,W(()=>m()))),L("change",P,()=>b(t(e),{speed:t(e).speed,state:t(e).speed===0?"off":"on"})),w(O,F)}),s(i),I(()=>{z(x,t(e).name),Y(u,`p-2 rounded-full ${(t(e).state==="on"?"bg-blue-100 text-blue-600":"bg-gray-100 text-gray-600")??""}`)}),L("click",u,()=>b(t(e),{state:t(e).state==="on"?"off":"on",speed:t(e).state==="on"?0:1})),Q(3,i,()=>R),w(r,i)}),s(g),s(c),w(D,c),H()}var he=$('<div class="p-4"><div class="flex items-center justify-between mb-4"><span class="font-medium"> </span> <div class="flex space-x-2"><button class="p-2 rounded-full bg-gray-100 hover:bg-gray-200"><!></button> <button class="p-2 rounded-full bg-gray-100 hover:bg-gray-200"><!></button></div></div> <div class="space-y-2"><div class="flex justify-between"><label class="text-sm text-gray-600">Position</label> <span class="text-sm font-medium"> </span></div> <input type="range" min="0" max="100" class="w-full"></div></div>'),we=$('<div class="bg-white rounded-lg shadow"><div class="p-4 border-b"><div class="flex items-center space-x-2"><!> <h2 class="text-lg font-medium">Window Shades</h2></div></div> <div class="divide-y"></div></div>');function $e(D,f){B(f,!1);let m=T(f,"shades",8);const k=N();function d(r,e){k("update",{deviceId:r.id,type:"shades",updates:e})}function b(r){return r===0?"Closed":r===100?"Open":`${r}% Open`}J();var c=we(),p=a(c),_=a(p),j=a(_);le(j,{class:"text-purple-500"}),U(2),s(_),s(p);var g=o(p,2);G(g,5,m,r=>r.id,(r,e)=>{var i=he(),n=a(i),l=a(n),x=a(l);s(l);var u=o(l,2),v=a(u),A=a(v);ce(A,{size:16}),s(v);var O=o(v,2),F=a(O);pe(F,{size:16}),s(O),s(u),s(n);var y=o(n,2),C=a(y),h=a(C),M=o(h,2),P=a(M);I(()=>z(P,b(t(e).position))),s(M),s(C);var S=o(C,2);K(S),s(y),s(i),I(()=>{z(x,t(e).name),E(h,"for",`position-${t(e).id??""}`),E(S,"id",`position-${t(e).id??""}`)}),L("click",v,()=>d(t(e),{position:0})),L("click",O,()=>d(t(e),{position:100})),V(S,()=>t(e).position,ee=>(t(e).position=ee,W(()=>m()))),L("change",S,()=>d(t(e),{position:t(e).position})),Q(3,i,()=>R),w(r,i)}),s(g),s(c),w(D,c),H()}var je=$('<span class="px-3 py-1 bg-yellow-100 text-yellow-800 rounded-full text-sm">Demo Mode</span>'),Ce=$('<div class="space-y-6"><div class="flex justify-between items-center"><h1 class="text-2xl font-bold text-gray-900">Interior Devices</h1> <!></div> <div class="grid grid-cols-1 lg:grid-cols-2 gap-6"><!> <!></div> <!></div>');function We(D,f){B(f,!1);const m=re(),k=()=>oe(de,"$isDemoMode",m),d=ae();let b=T(f,"data",8);N();async function c(n){const{deviceId:l,type:x,updates:u}=n.detail;if(k())X(d,{...t(d),[x]:t(d)[x].map(v=>v.id===l?{...v,...u}:v)});else try{if(!(await fetch(`/api/devices/${l}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)})).ok)throw new Error("Failed to update device")}catch(v){console.error("Error updating device:",v)}}te(()=>(t(d),ie(b())),()=>{(n=>X(d,n.devices))(b())}),se(),J();var p=Ce(),_=a(p),j=o(a(_),2);q(j,k,n=>{var l=je();w(n,l)}),s(_);var g=o(_,2),r=a(g);be(r,{get lights(){return t(d).lights},$$events:{update:c}});var e=o(r,2);ye(e,{get fans(){return t(d).fans},$$events:{update:c}}),s(g);var i=o(g,2);$e(i,{get shades(){return t(d).shades},$$events:{update:c}}),s(p),w(D,p),H()}export{We as component};
